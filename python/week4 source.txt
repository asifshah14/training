import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import seaborn as sns
%matplotlib notebook

# Removes default white gridlines from the plot:
plt.rcParams["axes.grid"] = False

# Read and clean data for manufacturing employees:
manuf = pd.read_csv('manuf.csv')
manuf['DATE'] = pd.to_datetime(manuf['DATE'])
manuf = manuf.rename(columns={'ANNA426MFG':'Manufacturing'})

# Read and clean data for employees in professional and business services:
prof_business = pd.read_csv('prof_business.csv')
prof_business['DATE'] = pd.to_datetime(manuf['DATE'])
prof_business = prof_business.rename(columns={'ANNA426PBSVN':'Professional services'})
prof_business = prof_business.dropna() # NaN values causing problems in plotting.

# Read and clean data for average weekly wages for employees in private organisations:
avg_weekly = pd.read_csv('avg_weekly.csv')
avg_weekly['DATE'] = pd.to_datetime(avg_weekly['DATE'])
avg_weekly = avg_weekly.rename(columns={'ENUC114640510':'Weekly wages'})

# Monthly date range:
#dates = pd.date_range(start='1/1/1990', end='1/2/2019', freq='MS')

fig, ax1 = plt.subplots()
ax1.plot(manuf['DATE'],manuf['Manufacturing'])
ax1.plot(prof_business['DATE'], prof_business['Professional services'])
ax1.set_xlabel('Year')
ax1.set_ylabel('Thousands of persons')
ax1.tick_params('y')

# frameon turns the frame around the legend on. framealpha adjusts the transparency of the box.
ax1.legend(loc='upper left', fontsize=9, frameon=True, framealpha=1)

ax2 = ax1.twinx()
ax2.plot(avg_weekly['DATE'],avg_weekly['Weekly wages'], 'r', label='Private sector weekly wages')
ax2.set_ylabel('Dollars per week')
ax2.tick_params('y')
ax2.legend(loc='upper right', fontsize=9, frameon=True, framealpha=1)

plt.title('Employment trends in Ann Arbor, Michigan')
fig.tight_layout()
plt.show()